<div class="card mt-4">
  <p-table
    class="tabela"
    dataKey="id"
    [value]="items"
    [scrollable]="true"
    [paginator]="true"
    [rows]="registrosPorPagina"
    [first]="indiceRegistro"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="{first} a {last} de {totalRecords} resultado(s)"
    (onPage)="aoMudarDePagina($event)"
    [columns]="colunas"
  >
    <ng-template #header let-columns>
      <tr>
        <th *ngIf="linhasExpansiveis" class="coluna_botao_expansivel"></th>
        <th *ngFor="let col of colunas" [pSortableColumn]="col.campo" [style.width]="col.largura || 'auto'">
          {{ col.cabecalho }} <p-sortIcon [field]="col.campo" />
        </th>
        <th class="coluna_acoes">Ações</th>
      </tr>
    </ng-template>

    <ng-template #body let-item let-columns="coluna_botao_expansivel" let-expanded="expanded">
      <tr>
        <td *ngIf="linhasExpansiveis" class="truncate">
          <p-button
            type="button"
            pRipple
            [pRowToggler]="item"
            [text]="true"
            [rounded]="true"
            [plain]="true"
            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
          />
        </td>

        <td *ngFor="let col of colunas" class="truncate">
          {{ item[col.campo] }}
        </td>

        <td class="flex justify-between gap-2">
          <p-button
            icon="pi pi-pencil"
            [rounded]="true"
            [outlined]="true"
            severity="primary"
            (click)="editar(item)"
          ></p-button>

          <p-button
            icon="pi pi-trash"
            [rounded]="true"
            [outlined]="true"
            severity="primary"
            (click)="excluir(item)"
          ></p-button>
        </td>
      </tr>
    </ng-template>

    <ng-template *ngIf="linhasExpansiveis" #expandedrow let-item>
      <tr dataKey="id">
        <td style="width: 1rem"></td>
        <td colspan="6">
          <p><b>Curso:</b> {{ item['curso'] }}</p>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
